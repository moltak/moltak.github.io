---
title: "AWS CodeDeploy 설정"
description: "AWS CodeDeploy 설정 방법과 IAM 권한, EC2 에이전트 설치 가이드"
date: "Mar 19 2021"
---

AWS Code Deploy 를 설정하는 방법은 크게 어렵지 않다. 메뉴얼을 그대로 잘 따라하면 설정할 수 있다. 오히려 좀 조심해야하는 부분이 있는데, 권한이 제대로 설정되지 않았을때나 뭔가 설정이 잘못되었을 때 발생하는 오류들을 추적하는 방법이다.

아래와 같은 명령어를 사용해 code deploy agent 의 에러들을 관찰하면 손쉽게 설정을 마칠 수 있다.

```bash
tail /var/log/aws/codedeploy-agent/codedeploy-agent.log -f
```

## 자세히 봐야하는 목차와 이유

### 1. Getting started

[Getting started](https://docs.aws.amazon.com/codedeploy/latest/userguide/getting-started-provision-user.html)

AWS 서비스를 사용할 때, 자주 어려움을 겪게 되는 부분은 IAM 설정 관련이다. 위 링크에 있는 것 중에 Step3, Step4 는 좀 꼼꼼히 볼 필요가 있다.

### 2. Code Deploy EC2에 설치

[Code Deploy EC2에 설치](https://docs.aws.amazon.com/codedeploy/latest/userguide/tutorials-on-premises-instance.html)

위 링크를 통해 EC2에 Code Deploy를 설치할 수 있고 아래 박스에 있는 걸 사용해도 된다. us-east-1 같은 region을 잘 맞춰주자.

```bash
sudo yum install -y gcc-c++ make git-core wget ruby nodejs
curl -sL https://rpm.nodesource.com/setup_12.x | sudo -E bash -
wget https://aws-codedeploy-us-east-1.s3.us-east-1.amazonaws.com/latest/install
chmod +x ./install
sudo ./install auto
sudo service codedeploy-agent start
sudo service codedeploy-agent status
```

### 3. ECS 에 설치

[ECS 에 설치](https://docs.aws.amazon.com/codedeploy/latest/userguide/tutorial-ecs-deployment.html)

아직 안해봤지만 나중에 사용해야하기 때문에 링크를 남긴다.
